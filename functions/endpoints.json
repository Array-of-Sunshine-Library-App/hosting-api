{
  "GET /api/endpoints": {
    "description": "Returns this JSON describing all available endpoints"
  },
  "GET /api/test": {
    "description": "Health check endpoint"
  },
  "GET /api/users/allusers": {
    "description": "Returns an array of all users",
    "example response": [
      { "username": "alice123", "name": "Alice" },
      { "username": "bob456", "name": "Bob" }
    ]
  },
  "POST /api/users/newuser": {
    "description": "Creates a new user and returns the created user",
    "example body": { "username": "alice123", "name": "Alice" },
    "example response": { "username": "alice123", "name": "Alice" }
  },
  "GET /api/users/:username": {
    "description": "Returns a single user by username",
    "example response": { "username": "alice123", "name": "Alice" }
  },
  "POST /api/users/:username/books": {
    "description": "Adds a book to the user's personal library and returns it",
    "example body": {
      "bookId": "abc123",
      "owned": true,
      "physical": true,
      "lendable": true,
      "isLendable": true,
      "notes": "A great read",
      "review": "Highly recommended",
      "rating": 5,
      "read": true,
      "bookInfo": {}
    },
    "example response": {
      "bookId": "abc123",
      "owned": true,
      "physical": true,
      "lendable": true,
      "isLendable": true,
      "notes": "A great read",
      "review": "Highly recommended",
      "rating": 5,
      "read": true,
      "bookInfo": {}
    }
  },
  "GET /api/users/:username/books": {
    "description": "Returns all books in the user's library. Accepts optional query ?lendable=true to filter to lendable books only",
    "queries": "lendable (true/false)",
    "example response": [
      {
        "bookId": "abc123",
        "owned": true,
        "physical": true,
        "lendable": true,
        "isLendable": true,
        "rating": 5,
        "read": true,
        "bookInfo": {}
      }
    ]
  },
  "GET /api/users/:username/books/:bookid": {
    "description": "Returns a single book from the user's library",
    "example response": {
      "bookId": "abc123",
      "owned": true,
      "physical": true,
      "lendable": true,
      "isLendable": true,
      "rating": 5,
      "read": true,
      "bookInfo": {}
    }
  },
  "DELETE /api/users/:username/books/:bookid": {
    "description": "Deletes a book from the user's library. Returns 204 No Content"
  },
  "POST /api/users/:username/wishlist": {
    "description": "Adds a book to the user's wishlist and returns it",
    "example body": { "bookId": "abc123", "bookInfo": {} },
    "example response": { "bookId": "abc123", "bookInfo": {} }
  },
  "GET /api/users/:username/wishlist": {
    "description": "Returns all books on the user's wishlist",
    "example response": [
      { "bookId": "abc123", "bookInfo": {} }
    ]
  },
  "GET /api/users/:username/wishlist/:bookid": {
    "description": "Returns a single book from the user's wishlist",
    "example response": { "bookId": "abc123", "bookInfo": {} }
  },
  "DELETE /api/users/:username/wishlist/:bookid": {
    "description": "Removes a book from the user's wishlist. Returns 204 No Content"
  },
  "POST /api/users/:username/friendrequests": {
    "description": "Sends a friend request to another user. :username is the sender",
    "example body": { "username": "bob456" },
    "example response": { "username": "bob456" }
  },
  "GET /api/users/:username/friendrequests": {
    "description": "Returns all pending incoming friend requests for the user",
    "example response": [
      { "username": "bob456" }
    ]
  },
  "POST /api/users/:username/acceptfriend": {
    "description": "Accepts a friend request. Adds both users to each other's friends list and removes the pending request",
    "example body": { "username": "bob456" },
    "example response": { "username": "bob456" }
  },
  "DELETE /api/users/:username/friendrequests/:rejectfriend": {
    "description": "Rejects and removes a pending friend request. Returns 204 No Content"
  },
  "GET /api/users/:username/friends": {
    "description": "Returns the user's full friends list",
    "example response": [
      { "username": "bob456" },
      { "username": "carol789" }
    ]
  },
  "DELETE /api/users/:username/friends/:todelete": {
    "description": "Removes a friend from both users' friends lists. Returns 204 No Content"
  },
  "POST /api/users/:borrower/books/:bookid/requestlend/:owner": {
    "description": "Sends a borrow request from :borrower to the :owner of the book. Returns 201 with no body"
  },
  "GET /api/users/:owner/books/:bookid/requestlist": {
    "description": "Returns all pending borrow requests for a specific book",
    "example response": {
      "alice123": "alice123",
      "bob456": "bob456"
    }
  },
  "POST /api/users/:owner/books/:bookid/acceptrequest/:borrower": {
    "description": "Accepts a borrow request. Moves the book into lending/borrowed collections and marks it as not lendable. Returns 201 with no body"
  },
  "DELETE /api/users/:username/borrowrequest/:bookid": {
    "description": "Cancels a borrow request. Returns 204 No Content"
  },
  "GET /api/users/:owner/lending": {
    "description": "Returns all books the user is currently lending out",
    "example response": [
      { "bookId": "abc123", "bookInfo": {}, "borrower": "bob456" }
    ]
  },
  "GET /api/users/:borrower/borrowing": {
    "description": "Returns all books the user is currently borrowing",
    "example response": [
      { "bookId": "abc123", "bookInfo": {}, "isLentFrom": "alice123" }
    ]
  },
  "DELETE /api/users/:borrower/returnbook/:owner/:bookid": {
    "description": "Returns a borrowed book. Removes it from both users' lending/borrowed collections and marks the book as lendable again. Returns 204 No Content"
  },
  "GET /api/users/:username/requestborrow": {
    "description": "Returns all incoming borrow requests across all of the user's books",
    "example response": [
      { "bookId": "abc123", "bookInfo": {}, "requests": { "bob456": "bob456" } }
    ]
  }
}
